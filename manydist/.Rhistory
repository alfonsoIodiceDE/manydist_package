if (!is.na(scaling_cont))  args$scaling_cont  <- scaling_cont
run_case(peng, !!!args, .label = label)
}
)
failures <- results |> dplyr::filter(!ok) |>
dplyr::select(label, error) |>
dplyr::arrange(label)
if (!requireNamespace("devtools", quietly = TRUE)) install.packages("devtools")
if (!requireNamespace("tidyverse", quietly = TRUE)) install.packages("tidyverse")
if (!requireNamespace("palmerpenguins", quietly = TRUE)) install.packages("palmerpenguins")
if (!requireNamespace("cluster", quietly = TRUE)) install.packages("cluster")
if (!requireNamespace("recipes", quietly = TRUE)) install.packages("recipes")
if (!requireNamespace("Rfast", quietly = TRUE)) install.packages("Rfast")
library(devtools)
# Adjust the path to your package root as needed
load_all("../manydist")
library(tidyverse)
library(palmerpenguins)
set.seed(123)
peng <- palmerpenguins::penguins |>
dplyr::select(species, island, bill_length_mm, bill_depth_mm,
flipper_length_mm, body_mass_g, sex) |>
tidyr::drop_na()
glue::glue("Rows: {nrow(peng)}, Cols: {ncol(peng)}")
skimr::skim(peng)
plot_cmd <- function(d_or_mat, title = "MDS (cmdscale)") {
to_matrix <- function(obj) {
if (is.null(obj)) return(NULL)
if ("R6" %in% class(obj)) {
if (!is.null(obj$distance)) return(as.matrix(obj$distance))
if ("to_dist" %in% names(obj)) return(as.matrix(obj$to_dist()))
return(NULL)
}
if (inherits(obj, "dist") || inherits(obj, "dissimilarity")) return(as.matrix(obj))
if (is.matrix(obj)) return(obj)
if (is.data.frame(obj)) return(as.matrix(obj))
NULL
}
m <- to_matrix(d_or_mat)
stopifnot(!is.null(m))
coords <- cmdscale(m, k = 2, eig = TRUE)
df <- tibble::as_tibble(coords$points) |> rlang::set_names(c("Dim1", "Dim2"))
ggplot2::ggplot(df, ggplot2::aes(Dim1, Dim2)) +
ggplot2::geom_point() +
ggplot2::labs(title = title)
}
run_case <- function(data, ..., .label = NULL) {
args <- rlang::list2(...)
started <- Sys.time()
out <- tryCatch({
d <- do.call(mdist_evolved, c(list(x = data), args))
list(ok = TRUE, dist = d, error = NA_character_)
}, error = function(e) list(ok = FALSE, dist = NULL, error = conditionMessage(e)))
ended <- Sys.time()
# force character label (avoid logical NA)
lab <- .label
if (is.null(lab) || (length(lab) == 1 && is.na(lab))) lab <- ""
lab <- as.character(lab)
# your existing matrix extraction here (if you added it)
get_mat <- function(obj) {
if (is.null(obj)) return(NULL)
if ("R6" %in% class(obj)) {
if (!is.null(obj$distance)) return(as.matrix(obj$distance))
if ("to_dist" %in% names(obj)) return(as.matrix(obj$to_dist()))
return(NULL)
}
if (inherits(obj, "dist") || inherits(obj, "dissimilarity")) return(as.matrix(obj))
if (is.matrix(obj)) return(obj)
if (is.data.frame(obj)) return(as.matrix(obj))
NULL
}
M <- if (out$ok) get_mat(out$dist) else NULL
tibble::tibble(
label = lab,
args = list(args),
ok = out$ok,
error = out$error,
class = if (out$ok) paste(class(out$dist), collapse = "/") else NA_character_,
dim = if (out$ok && !is.null(M)) paste(dim(M), collapse = " x ") else NA_character_,
elapsed_s = as.numeric(ended - started, units = "secs"),
dist = list(out$dist),
mat  = list(M)
)
}
grid_expand <- function(...) {
tidyr::expand_grid(...) |> dplyr::mutate(id = dplyr::row_number())
}
# 1) Gower (mixed) — test commensurable TRUE/FALSE
grid_gower <- grid_expand(
preset = "gower",
commensurable = c(TRUE, FALSE)
) |>
dplyr::mutate(distance_cont = "manhattan",  # ignored by gower, kept for trace
distance_cat = "matching",
scaling_cont = "none")
# 2) custom — sweep over key knobs
grid_custom <- grid_expand(
preset = "custom",
distance_cont = c("manhattan", "euclidean"),
distance_cat  = c("matching", "tot_var_dist"),
commensurable = c(TRUE, FALSE),
scaling_cont  = c("none", "std", "pc_scores")
)
# 3) euclidean_onehot — fixed choices (scaling/std, no commensurability)
grid_onehot <- grid_expand(
preset = "euclidean_onehot"
) |>
dplyr::mutate(distance_cont = "euclidean",
distance_cat = "matching",
commensurable = FALSE,
scaling_cont = "std")
# 4) unbiased_dependent — fixed (per your function)
grid_udep <- grid_expand(preset = "unbiased_dependent") |>
dplyr::mutate(distance_cont = "manhattan",
distance_cat  = "tot_var_dist",
commensurable = TRUE,
scaling_cont  = "pc_scores")
# 5) External methods — these depend on extra code; we attempt and log
grid_external <- grid_expand(
preset = c("gudmm", "dkss", "mod_gower")
) |>
dplyr::mutate(distance_cont = NA, distance_cat = NA,
commensurable = NA, scaling_cont = NA)
# Combine
grid_all <- dplyr::bind_rows(grid_gower, grid_custom, grid_onehot, grid_udep, grid_external) |>
dplyr::mutate(label = paste0("preset=", preset,
ifelse(!is.na(distance_cont), paste0(", dc=", distance_cont), ""),
ifelse(!is.na(distance_cat),  paste0(", dcat=", distance_cat), ""),
ifelse(!is.na(commensurable), paste0(", comm=", commensurable), ""),
ifelse(!is.na(scaling_cont),  paste0(", sc=", scaling_cont), "")))
nrow(grid_all)
head(grid_all, 10)
grid_all=grid_custom
grid_all
# Helper to test NA/NULL/empty
is_blank <- function(x) is.null(x) || (length(x) == 1 && is.na(x))
results <- purrr::map_dfr(seq_len(nrow(grid_all)), function(i) {
g <- grid_all[i, , drop = FALSE]
# Build exactly what mdist_evolved() should see
args <- list(preset = g$preset[[1]])
if (!is_blank(g$distance_cont[[1]])) args$distance_cont <- g$distance_cont[[1]]
if (!is_blank(g$distance_cat[[1]]))  args$distance_cat  <- g$distance_cat[[1]]
if (!is_blank(g$commensurable[[1]])) args$commensurable <- g$commensurable[[1]]
if (!is_blank(g$scaling_cont[[1]]))  args$scaling_cont  <- g$scaling_cont[[1]]
# label is just for display
lab <- g$label[[1]]
if (is_blank(lab)) lab <- ""
lab <- as.character(lab)
run_case(peng, !!!args, .label = lab)
})
cat_peng=peng |> select(where(is.factor))
cont_peng = peng |> select(where(is.factor))
cont_peng = peng |> select(where(is.numeric))
cat_peng = peng |> select(where(is.factor))
preset_structure = tibble(presets = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
if (!requireNamespace("devtools", quietly = TRUE)) install.packages("devtools")
if (!requireNamespace("tidyverse", quietly = TRUE)) install.packages("tidyverse")
if (!requireNamespace("palmerpenguins", quietly = TRUE)) install.packages("palmerpenguins")
if (!requireNamespace("cluster", quietly = TRUE)) install.packages("cluster")
if (!requireNamespace("recipes", quietly = TRUE)) install.packages("recipes")
if (!requireNamespace("Rfast", quietly = TRUE)) install.packages("Rfast")
library(devtools)
# Adjust the path to your package root as needed
load_all("../manydist")
library(tidyverse)
library(palmerpenguins)
set.seed(123)
peng <- palmerpenguins::penguins |>
dplyr::select(species, island, bill_length_mm, bill_depth_mm,
flipper_length_mm, body_mass_g, sex) |>
tidyr::drop_na()
cont_peng = peng |> select(where(is.numeric))
cat_peng = peng |> select(where(is.factor))
preset_structure = tibble(presets = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
rlang::last_trace()
# Adjust the path to your package root as needed
load_all("../manydist")
# Adjust the path to your package root as needed
dev_tools::load_all("../manydist")
# Adjust the path to your package root as needed
devtools::load_all("../manydist")
# Adjust the path to your package root as needed
devtools::load_all("../manydist")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
source("../manydist/R/mdist_evolved.R")
library(tidyverse)
library(palmerpenguins)
set.seed(123)
peng <- palmerpenguins::penguins |>
dplyr::select(species, island, bill_length_mm, bill_depth_mm,
flipper_length_mm, body_mass_g, sex) |>
tidyr::drop_na()
cont_peng = peng |> select(where(is.numeric))
cat_peng = peng |> select(where(is.factor))
preset_structure = tibble(presets = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
rlang::last_trace()
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
source("../manydist/R/mdist_evolved.R")
preset_structure = tibble(presets = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
source("gower_recipe.R")
source("../manydist/R/mdist_evolved.R")
source("../manydist/R/gower_recipe.R")
source("../manydist/R/ndist.R")
source("../manydist/R/cdist.R")
source("../manydist/R/gudmm_preprocessing.R")
source("../manydist/R/gudmm_distance_dependency_mixed_matrix.R")
source("../manydist/R/mg_gower_mod_matrix.R")
source("../manydist/R/dkss_preprocessing.R")
preset_structure = tibble(presets = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
step <- 0.5
vals <- seq(0.1, 0.5, by = step)
grid <- expand.grid(w1 = vals, w2 = vals, w3 = vals, w4 = vals) |>
subset(abs(w1 + w2 + w3 + w4 - 1) < 1e-9)
grid
step <- 0.5
vals <- seq(0.1, 0.5, by = step)
grid <- expand.grid(w1 = vals, w2 = vals, w3 = vals, w4 = vals)
grid
step <- 0.05
vals <- seq(0.1, 0.5, by = step)
grid <- expand.grid(w1 = vals, w2 = vals, w3 = vals, w4 = vals) |>
subset(abs(w1 + w2 + w3 + w4 - 1) < 1e-9)
grid
nrow(grid)
grid |> filter(w4<=.2)
step <- 0.05
vals <- seq(0.1, 0.35, by = step)
grid <- expand.grid(w1 = vals, w2 = vals, w3 = vals, w4 = vals) |>
subset(abs(w1 + w2 + w3 + w4 - 1) < 1e-9)
grid |> filter(w4<=.2)
step <- 0.05
vals <- seq(0.1, 0.4, by = step)
grid <- expand.grid(w1 = vals, w2 = vals, w3 = vals, w4 = vals) |>
subset(abs(w1 + w2 + w3 + w4 - 1) < 1e-9)
grid
rlang::last_trace()
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
preset_structure = tibble(presets = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
source("../manydist/R/mdist_evolved.R")
source("../manydist/R/gower_recipe.R")
source("../manydist/R/ndist.R")
source("../manydist/R/cdist.R")
source("../manydist/R/gudmm_preprocessing.R")
source("../manydist/R/gudmm_distance_dependency_mixed_matrix.R")
source("../manydist/R/mg_gower_mod_matrix.R")
source("../manydist/R/dkss_preprocessing.R")
source("../manydist/R/gudmm_mutual_info_regression.R")
source("../manydist/R/gudmm_mutual_info_classif.R")
source("../manydist/R/gudmm_mutual_info_score.R")
source("../manydist/R/gudmm_jensen_shannon.R")
source("../manydist/R/mdist_evolved.R")
source("../manydist/R/gower_recipe.R")
source("../manydist/R/ndist.R")
source("../manydist/R/cdist.R")
source("../manydist/R/gudmm_preprocessing.R")
source("../manydist/R/gudmm_distance_dependency_mixed_matrix.R")
source("../manydist/R/mg_gower_mod_matrix.R")
source("../manydist/R/dkss_preprocessing.R")
source("../manydist/R/gudmm_mutual_info_regression.R")
source("../manydist/R/gudmm_mutual_info_classif.R")
source("../manydist/R/gudmm_mutual_info_score.R")
source("../manydist/R/gudmm_jensen_shannon.R")
source("../manydist/R/gudmm_calculate_R_MI.R")
source("../manydist/R/gudmm_distance_categorical_exact.R")
source("../manydist/R/gudmm_distance_dependency_mixed_matrix.R")
# Adjust the path to your package root as needed
devtools::load_all("../manydist")
peng <- palmerpenguins::penguins |>
dplyr::select(species, island, bill_length_mm, bill_depth_mm,
flipper_length_mm, body_mass_g, sex) |>
tidyr::drop_na()
cont_peng = peng |> select(where(is.numeric))
cat_peng = peng |> select(where(is.factor))
preset_structure = tibble(presets = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
rlang::last_trace()
source("../manydist/R/gudmm_mutual_info_regression.R")
source("../manydist/R/gudmm_mutual_info_classif.R")
source("../manydist/R/gudmm_mutual_info_score.R")
source("../manydist/R/gudmm_jensen_shannon.R")
source("../manydist/R/gudmm_calculate_R_MI.R")
source("../manydist/R/gudmm_distance_categorical_exact.R")
source("../manydist/R/gudmm_distance_dependency_mixed_matrix.R")
source("../manydist/R/gudmm_preprocessing.R")
source("../manydist/R/mg_gower_mod_matrix.R")
source("../manydist/R/mg_gower_fcn.r")
source("../manydist/R/mg_gower_dist_modify.R")
source("../manydist/R/mg_self_adaptive_distance.R")
source("../manydist/R/mg_normalized_MI.R")
source("../manydist/R/mdist_evolved.R")
source("../manydist/R/gower_recipe.R")
source("../manydist/R/ndist.R")
source("../manydist/R/cdist.R")
source("../manydist/R/dkss_preprocessing.R")
preset_structure = tibble(presets = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
preset_structure
preset_structure$presets[[1]]
preset_structure$presets[[1]] |> str()
preset_structure$presets[[1]]$new()
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("../manydist/R/mdist_class.R")
preset_structure = tibble(presets = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
preset_structure$presets[[1]]$new()
preset_structure$presets[[1]]
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
gow_try = mdist_evolved(x=peng,preset="gower")
gow_try
gow_try |> class()
preset_structure = tibble(presets = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
preset_structure$presets[[1]]
preset_structure$presets
preset_structure$mix_distance
preset_structure = tibble(presets = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
preset_structure$mix_distance[[1]]
preset
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
preset_structure = tibble(presets = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
preset_structure$mix_distance
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
gow_try = mdist_evolved(x=peng,preset="gower")
gow_try |> class()
gow_try$distance
gow_try$params
gow_try$preset
preset_structure = tibble(preset = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
gow_try = mdist_evolved(x=peng,preset="gudmm")
gow_try = mdist_evolved(x=peng,preset="unbiased_dependent")
gow_try = mdist_evolved(x=peng,preset="euclidean_onehot")
gow_try = mdist_evolved(x=peng,preset="dkss")
gow_try = mdist_evolved(x=peng,preset="mod_gower")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
gow_try = mdist_evolved(x=peng,preset="unbiased_dependent")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
gow_try = mdist_evolved(x=peng,preset="unbiased_dependent")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
gow_try = mdist_evolved(x=peng,preset="gudmm")
preset_structure = tibble(preset = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
preset_structure = tibble(preset = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower","custom")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
preset_structure$mix_distance[[1]]
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
preset_structure = tibble(preset = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower","custom")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
preset_structure$mix_distance[[1]]
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
preset_structure = tibble(preset = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower","custom")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
preset_structure$mix_distance[[1]]
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
preset_structure = tibble(preset = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower","custom")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
preset_structure$mix_distance[[1]]
preset_structure$mix_distance[[7]]
preset_structure = tibble(preset = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower","custom")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
preset_structure$mix_distance[[7]]
preset_structure$mix_distance[[1]]
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
preset_structure = tibble(preset = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower","custom")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
preset_structure$mix_distance[[1]]
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
preset_structure = tibble(preset = c("gower","unbiased_dependent","euclidean_onehot","gudmm","dkss","mod_gower","custom")) |>
mutate(mix_distance = map(.x=preset,~mdist_evolved(x=peng,preset=.x))
)
preset_structure$mix_distance[[1]]
preset_structure$mix_distance[[2]]
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_evolved.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
preset_structure$mix_distance[[6]]
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_class.R")
source("~/Library/CloudStorage/Dropbox/gitgub_repos/manydist_package/manydist/R/mdist_summary_impl.R")
# ============================================================
# Check, install (if needed), and load R packages for
# distance computation competitors to manydist
# ============================================================
competitor_pkgs <- c(
# --- Continuous ---
"proxy",          # many distance metrics + custom ones
"parallelDist",   # multithreaded distance computation
"Rfast",          # fast C++ distances for large matrices
# --- Categorical / binary ---
"klaR",           # kmodes -> simple matching distance
"arules",         # dissimilarities on transactions (Jaccard, cosine, etc.)
# --- Mixed (numeric + categorical) ---
"cluster",        # daisy(metric = "gower")
"FD",             # gowdis()
"StatMatch",      # gower.dist()
"gower",          # fast C implementation of Gower
"clustMixType"    # kproto (Gower variant and λ-weighted)
)
# Identify missing packages
missing_pkgs <- setdiff(competitor_pkgs, rownames(installed.packages()))
if (length(missing_pkgs) > 0) {
cat("Installing missing packages:\n")
cat(paste0("  - ", missing_pkgs, collapse = "\n"), "\n")
install.packages(missing_pkgs, dependencies = TRUE)
} else {
cat("✅ All competitor packages are already installed.\n")
}
# Load all packages quietly
suppressPackageStartupMessages(
lapply(competitor_pkgs, require, character.only = TRUE)
)
print(competitor_pkgs)
data(cars)
cars
data(cars) |> dim()
data(cars) |> as_tibble()
data(cars)
cars
cars |> nrow()
cars |> names()
sample(1:5,size=n,replace = T)
n = cars |> nrow()
fold_ids = sample(1:5,size = n,replace = T)
fold_ids
paste0("fold_",fold_ids)
recipe(speed~dist,data=cars)
recipe(speed~dist,data=cars) |> step_poly(dist,degree=tune())
my_cars=cars |> mutate(folds=fold_ids)
my_cars
fold_ids = paste0("fold_",fold_ids)
my_cars=cars |> mutate(folds=fold_ids)
my_cars
for(k in 5:1){
test_fold=paste0("fold_",k)
print(test_fold)
}
k=1
test_fold=paste0("fold_",k)
train_obs = my_cars |> filter(folds!=test_fold)
test_obs = my_cars |> filter(folds==test_fold)
fitted_model = lm(speed~dist,data=train_obs)
preds = predict(fitted_model,newdata = test_obs)
preds
rmse_vec=rep(0,5)
rmse_vec
for(k in 5:1){
test_fold=paste0("fold_",k)
train_obs = my_cars |> filter(folds!=test_fold)
test_obs = my_cars |> filter(folds==test_fold)
fitted_model = lm(speed~dist,data=train_obs)
preds = predict(fitted_model,newdata = test_obs)
rmse_vec[k]=sqrt(mean((test_obs$speed-preds)^2))
}
rmse_vec
rmse_cv=mean(rmse_vec)
rmse_cv
